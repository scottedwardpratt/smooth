\documentclass[UserManual.tex]{subfiles}
\begin{document}
\setcounter{section}{3}
\section{Performing Full Model Runs}\label{sec:fullmodel}

After setting the locations of the training points in model-parameter space, as described in Sec. \ref{sec:tpo}, it is up to the User to run the full model at those points and record the values of all the observables for each point. Only then can the {\it Smooth Emulator} software proceed to the next step of tuning the emulator.

There are two forms for storing training data. In the default form, where the parameter\\
{\tt SmoothEmulator\_TrainingFormat} is set to {\tt training\_format\_smooth}, training data for a run generated from a specific point in model-parameter space is stored in a unique directory. To be more compatible with the {\it SURMISE} statistical package, there is a second option, where\\
{\tt SmoothEmulator\_TrainingFormat} is set to {\tt training\_format\_surmise}. For this option the model-parameter values for all the training runs are stored in a single file, defined by the parameter {\tt SmoothEmulator\_FullModelTrainingParsFileName} and the model observables are stored in a single file {\tt SmoothEmulator\_TrainingThetasFilename}. These parameters are defined in\\
{\tt smooth\_data/smooth\_parameters/emulator\_parameters.txt}. 

\subsection{Default Format for Training Data}

Once the training points are generated, the User must run the full model for each of the training points. At this point there is a directory, usually called {\tt \$\{MY\_PROJECT\}/smooth\_data/FullModelRuns/}, in which there are sub directories, {\tt run0/, run1/, run2/...}.  Within each sub-directory, {\tt runI}, there should exist a text file {\tt smooth\_data/FullModelRuns/runI/model\_parameters.txt}, where $I=0,1,2,\cdots$. These files could have been generated by {\it Simplex Sampler}, but could have been generated by any other means, including by hand. The files should be of the form,
{\tt
\begin{verbatim}
par1_name  x1
par2_name  x2
par3_name  x3
\end{verbatim}\vspace*{-20pt}\hspace*{24pt}$\vdots$
}\\
The model-parameter names must match those defined in \\{\tt \$\{MY\_PROJECT\}/smooth\_data/Info/prior\_info.txt}, the format of which is described in Sec. \ref{sec:simplex}. 

The User must then perform full model runs using the model-parameter values as defined in each sub-directory. The full model runs should record results by writing a list of observable values in each run directory. Each file must be named {\tt smooth\_data/FullModelRuns/runI/obs.txt}, where $I=0,1,2,\cdots$. The format of those text files should be
{\tt
\begin{verbatim}
observable1_name  Y1  
observable2_name  y2  
observable3_name  y3  
.
.
\end{verbatim}
}
The names must match those listed in {\tt smooth\_data/Info/observable\_info.txt}, which will be used by {\it Smooth Emulator}, as described in Sec. \ref{sec:emulator}. The values are the observable values as calculated by the full model for the model-parameter values listed in the corresponding {\tt model\_parameters.txt} file in the same directory.

The random uncertainties refer only to those uncertainties due to noise in the full model. Random noise is that, which if the full model would be rerun at the same model-parameter values, would represent the variation in the observable values. In most cases this would be set to zero. But, if the full model has some aspect of sampling to it, for example generating observables from event generators with a finite number of events, that variation should be listed here. This variation is required for the emulator. If there is such a variation, the User might not wish to constrain the emulator to exactly reproduce the training point observables at the training points. The principal danger being, that if two training points are very close to one another, but with a finite fluctuation, exactly producing the training points might require very high slopes to exactly reproduce the training points. If the training points are far apart from one another, and if the random uncertainties are not large, it should be safe to ignore the random uncertainty and constrain the emulator to exactly reproduce the model values. 

Once the observable files are produced for each of the full model runs, the User can then proceed to build and tune an emulator using {\it Smooth Emulator}.

\subsection{SURMISE Compatible Format for Training Data}

In this case the descriptions of the points in model-parameter space at which the training runs were performed is contained in a single file defined by the option {\tt SmoothEmulator\_FullModelTrainingParsFileName}. The default is set to {\tt smooth\_data/FullModelRuns/modelpars_surmise.txt}. The User would construct a file in the form
\vspace*{-8pt}
{\tt\begin{verbatim}
X1   X2   X3   ....
X1   X2   X3   ....
\end{verbatim}}
\vspace*{-16pt}
 \hspace*{18pt}$\vdots$,\\
where each row listed the model parameters for a specific training run. Similary, the parameter {\tt SmoothEmulator\_FullModelTrainingObsFileName} would describe the file where the observables from the training runs were listed. The default name is {\tt smooth_data/FullModelRuns/obs_surmise.txt}. The format for the file is 
\vspace*{-8pt}
{\tt\begin{verbatim}
Y1   Y2   Y3   ....
Y1   Y2   Y3   ....
\end{verbatim}}
\vspace*{-16pt}
 \hspace*{28pt}$\vdots$\\
Again, each row corresponds to a different training point. The two files should thus have the same number of rows.

With this option, there is no way to choose a subset of points from which to train. 

\end{document}
